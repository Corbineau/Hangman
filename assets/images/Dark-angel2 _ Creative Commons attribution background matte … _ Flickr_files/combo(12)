YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGpu:null,initializer:function(o){return this.photoId=o.photoId,this.disableIfSmall=!!o.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGpu=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGpu=!1)),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(o){e.set("photo",o)})},buildContainer:function(){return this.setContainerWithTemplate("zoom"),this},activate:function(){var o=this,t=o.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),o.registerEventHandler(o.get("container").on("click",function(t){t.preventDefault(),o.cursorCoords=[t.pageX-e.config.win.pageXOffset,t.pageY-e.config.win.pageYOffset],e.rapidTracker.beacon(o.name,"zoomInClick"),o.zoomIn(o.cursorCoords)})),o.registerEventHandler(e.on("photo:zoom",function(t){t.x&&t.y?(o.cursorCoords=[t.x-e.config.win.pageXOffset,t.y-e.config.win.pageYOffset],o.zoomIn(o.cursorCoords)):o.zoomIn(),e.rapidTracker.beacon(o.name,"zoomInRemoteFire")})),o.attachKeyEvent("down:90",e.betterThrottle(function(t){t.preventDefault(),e.rapidTracker.beacon(o.name,"zoomInKeyPress"),o.zoomIn()},100)),o.attachKeyEvent("down:90,27",e.betterThrottle(function(t){t.preventDefault(),e.rapidTracker.beacon(o.name,"zoomOutKeyPress"),o.zoomOut()},100),t),o.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(t){var n=[o.currentZoomRegion.left,o.currentZoomRegion.top];switch(t.preventDefault(),t.button){case 37:n[0]+=200;break;case 38:n[1]+=200;break;case 39:n[0]-=200;break;case 40:n[1]-=200}e.rapidTracker.beacon(o.name,"zoomPanKeyPress"),o.panZoomNode(n)},16),t),o.registerEventHandler(o.appContext.flapp.before("activeViewChange",function(t){e.fire("flickr:removeKeyEventScope",o.getZoomKeyScope()),o.detachRegisteredEvents(),o.detachEventHandlers(),o.cleanUp()}))),this},getZoomEdgeMargin:function(){return 100},panZoomNodeToCurrentCoords:function(){if(this.zoomedIn){var e=this.cursorCoords,o=this.getZoomPanCoordsForCursor(e);o&&this.panZoomNode(o)}},panZoomNode:function(e){this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1]||(e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e)},constrainPanCoords:function(e){var o,t,n=this.getZoomEdgeMargin(),i=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],a=[r[0]+2*n,r[1]+2*n];return 0,o=i[0]-r[0]-2*n,0,t=i[1]-r[1]-2*n,e[0]>0?e[0]=0:e[0]<o&&(e[0]=o),e[1]>0?e[1]=0:e[1]<t&&(e[1]=t),r[0]<i[0]&&(e[0]=.5*(i[0]-a[0])),r[1]<i[1]&&(e[1]=.5*(i[1]-a[1])),e},getZoomPanCoordsForCursor:function(e){if(e){var o=this.getZoomEdgeMargin(),t=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],n=[this.zoomImageFullWidth,this.zoomImageFullHeight],i=[n[0]+2*o,n[1]+2*o],r=[e[0]/t[0],e[1]/t[1]];return[r[0]*(t[0]-i[0]),r[1]*(t[1]-i[1])]}},getZoomSmallRegion:function(){var o=this.get("container");return{left:o.getX()-e.config.win.pageXOffset-this.getZoomEdgeMargin(),top:o.getY()-e.config.win.pageYOffset-this.getZoomEdgeMargin(),width:parseInt(o.getStyle("width"),10),height:parseInt(o.getStyle("height"),10)}},resizeZoomNode:function(o,t){var n,i,r=this,a=e.config.win.performance&&e.config.win.performance.now;return t?new e.Promise(function(t,s){function h(s){var d=(function(e){var s,h=(a?e-n:Date.now()-n)/r.getZoomTransitionTime();return h>=1?(s=o,r.isAnimatingZoom=!1,setTimeout(function(){t()},r.getZoomTransitionTime())):s={left:i.left+(o.left-i.left)*h,top:i.top+(o.top-i.top)*h,width:i.width+(o.width-i.width)*h,height:i.height+(o.height-i.height)*h},s})(s);(r.zoomingIn||r.zoomingOut)&&(r.resizeZoomNode(d,!1),d!==o&&e.config.win.requestAnimationFrame(h))}r.isAnimatingZoom=!0,n=a?e.config.win.performance.now():Date.now(),i=r.currentZoomRegion,e.config.win.requestAnimationFrame(h)}):(this.currentZoomRegion=o,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+o.left+"px, "+o.top+"px) scale("+o.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},getZoomTransitionTime:function(){return 200},zoomOut:function(){var o=this,t=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),this.detachEventHandlers(),this.resizeZoomNode(this.getZoomSmallRegion(),!0),t.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){o.zoomingOut&&t&&t._node&&(o.parentViewContainer.removeClass("zoomed"),t.removeClass("hiding"),t.addClass("hidden"),setTimeout(function(){o.zoomingOut&&(o.cleanUp(),this.zoomingOut=!1)},200))},this.getZoomTransitionTime()+0),delete this.pendingCoords,delete this.currentCoords},detachEventHandlers:function(){this.zoomNode&&(this.zoomNode.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers))},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!1,delete this.zoomNode,delete this.zoomPhotoContainerNode,delete this.pendingCoords,delete this.currentCoords,this.zoomAnimationHandle.detach())},isImageReadyToDisplay:function(e){var o;return!!e&&(o=new Image,o.src=e,o.complete||o.naturalWidth)},getZoomKeyScope:function(){return this.name+this._yuid},zoomMouseMoveHandler:function(o){this.cursorCoords=[o.pageX-e.config.win.pageXOffset,o.pageY-e.config.win.pageYOffset],this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var o=e.wheelDeltaX,t=e.wheelDeltaY;void 0===o&&(o=-e.deltaX||0),void 0===t&&(t=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+o,this.currentZoomRegion.top+t])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),o=this.parentViewContainer.one(".main-photo");return{small:e?e.getAttribute("src"):"",medium:o?o.getAttribute("src"):"",large:this.getLargestSize()}},getLargestSize:function(){var e,o=this.appContext.flipper.isFlipped("enable-zoom-proxy"),t=this.appContext.flipper.config["zoom-proxy-prefix"];return o&&t?"o"===(e=this.get("photo").getLargestSize({excludeSizes:[]})).key&&(console.log("proxyPrefix",t,"largestSize.displayUrl",e.displayUrl),e.displayUrl=e.url=t+"http:"+e.displayUrl,console.log("proxying original",e.url)):e=this.get("photo").getLargestSize(),e},zoomIn:function(o){var t,n,i,r,a,s=this,h=this.getSizes(),d=this.isImageReadyToDisplay(h.medium),m=this.isImageReadyToDisplay(h.large.url),c=this.getZoomPixelRatio(),l=this.getZoomSmallRegion(),g=this.maxMsgNode;if(this.disableIfSmall&&l.width>=h.large.width)return g||(g=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+s.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(g)||(g.addClass("hidden"),this.get("container").append(g)),void setTimeout(function(){g&&g.inDoc()&&(g.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){g&&g.inDoc()&&g.addClass("hidden")},3e3))},0);e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.zoomAnimationHandle=e.AnimationManager.subscribe(function(){var t,n,i=s.getDeteriorationRateForEasing(),r={x:0,y:0},a={x:0,y:0},h={x:0,y:0};s.pendingCoords&&(r.x=parseInt(s.pendingCoords[0],10),r.y=parseInt(s.pendingCoords[1],10),s.currentCoords?(a.x=s.currentCoords[0],a.y=s.currentCoords[1]):(t=s.getZoomPanCoordsForCursor(o),n=s.constrainPanCoords(t),a.x=parseInt(n[0],10),a.y=parseInt(n[1],10)),r.x<a.x?h.x=a.x-Math.abs(r.x-a.x)*i:h.x=a.x+Math.abs(r.x-a.x)*i,r.y<a.y?h.y=a.y-Math.abs(r.y-a.y)*i:h.y=a.y+Math.abs(r.y-a.y)*i,h.x=parseInt(h.x,10),h.y=parseInt(h.y,10),h.x===a.x&&(r.x<a.x?h.x=a.x-1:r.x>a.x&&(h.x=a.x+1)),h.y===a.y&&(r.y<a.y?h.y=a.y-1:r.y>a.y&&(h.y=a.y+1)),h.x===r.x&&h.y===r.y||((!0===s.forceGpu||e.config.win.devicePixelRatio>1)&&!1!==s.forceGpu?s.zoomPhotoContainerNode.setStyle("transform","translate3d("+h.x+"px, "+h.y+"px, 0)"):s.zoomPhotoContainerNode.setStyle("transform","translate("+h.x+"px, "+h.y+"px)")),s.currentCoords=[h.x,h.y],h.x===r.x&&h.y===r.y&&delete s.pendingCoords)}),this.zoomNode?(this.zoomingOut=!1,(t=this.zoomNode).removeClass("hiding"),this.detachEventHandlers()):t=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:d?h.medium:h.small,largeSrc:m?h.large.url:""})),n=this.zoomPhotoContainerNode=t.one(".zoom-photo-container"),this.zoomImageFullWidth=h.large.width/c,this.zoomImageFullHeight=h.large.height/c,o||(o=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2],s.cursorCoords=o),i=this.getZoomPanCoordsForCursor(o),i=this.constrainPanCoords(i),r={left:i[0],top:i[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},n.setStyle("transition","none"),this.resizeZoomNode(l,!1),t.on("click",function(o){s.zoomingIn||(o.preventDefault(),e.rapidTracker.beacon(s.name,"zoomOutClick"),s.zoomOut())}),e.one("body").append(t),n.setStyle("width",r.width),n.setStyle("height",r.height),e.soon(function(){s.zoomingIn&&(t.removeClass("hidden"),n.setStyle("transition",""),"ontouchstart"in document&&e.use("event-touch",function(){s.touchHandlers=[],s.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&1===e.changedTouches.length&&(s.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),s.touchHandlers.push(e.on("touchmove",function(e){var o,t,n=e.pageX,i=e.pageY;s.touching&&e.changedTouches.length&&1===e.changedTouches.length&&(n=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY,e.preventDefault(),o=n-s.touching[0],t=i-s.touching[1],s.touching=[n,i],s.panZoomNode([s.currentZoomRegion.left+o,s.currentZoomRegion.top+t]))})),s.touchHandlers.push(e.on("touchend",function(e){delete s.touching}))}),"ontouchstart"in document&&!s.appContext.flipper.isFlipped("enable-always-bind-mouse-events-zoom-view")||(t.on("mousemove",s.zoomMouseMoveHandler.bind(s)),s.mouseWheelHandler=(function(){var e=s.zoomScrollWheelHandler.bind(s);return a="onwheel"in document.createElement("div")?"wheel":"mousewheel",document.addEventListener(a,e,!1),{detach:function(){document.removeEventListener(a,e,!1)}}})()),s.parentViewContainer.addClass("zoomed"),s.resizeZoomNode(r,!0).then(function(){s.zoomingIn&&(s.zoomingIn=!1,s.zoomedIn=!0,s.panZoomNodeToCurrentCoords(),m||n.append('<img src="'+h.large.url+'" class="zoom-large">'))}))})},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){return 1}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","hermes-template-zoom","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});YUI.add("hermes-template-photo-well-media-scrappy",function(t,a){var e=t.Template.Handlebars.revive({1:function(t,a,e,l,n){var i,s=null!=a?a:{};return'\t<div class="restricted-interstitial">\n\t\t<div class="restricted-interstitial-message">\n\t\t\t<h2>'+t.escapeExpression((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:n}))+"</h2>\n"+(null!=(i=e.if.call(s,null!=a?a.isSignedIn:a,{name:"if",hash:{},fn:t.program(2,n,0),inverse:t.program(5,n,0),data:n}))?i:"")+"\t\t</div>\n\t</div>\n"},2:function(t,a,e,l,n){var i,s=null!=a?a:{},h=e.helperMissing,r=t.escapeExpression;return"\t\t\t\t<p>"+r((e.intlMessage||a&&a.intlMessage||h).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:n}))+"<br />"+r((e.intlMessage||a&&a.intlMessage||h).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:n}))+"</p>\n\n"+(null!=(i=e.unless.call(s,null!=a?a.isMinor:a,{name:"unless",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n}))?i:"")},3:function(t,a,e,l,n){var i=null!=a?a:{},s=e.helperMissing,h=t.escapeExpression;return"\t\t\t\t\t<p><button class='ui-button'><span>"+h((e.intlMessage||a&&a.intlMessage||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:n}))+"</span></button></p>\n\t\t\t\t\t<p>"+h((e.intlHTMLMessage||a&&a.intlHTMLMessage||s).call(i,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:n}))+"</p>\n"},5:function(t,a,e,l,n){var i,s=null!=a?a:{},h=e.helperMissing,r=t.escapeExpression;return"\t\t\t\t<p>"+r((e.intlMessage||a&&a.intlMessage||h).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:n}))+' <a href="//'+r("function"==typeof(i=null!=(i=e.host||(null!=a?a.host:a))?i:h)?i.call(s,{name:"host",hash:{},data:n}):i)+'/signin/" data-track="photoWellSignInClick">'+r((e.intlMessage||a&&a.intlMessage||h).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:n}))+"</a></p>\n"},7:function(t,a,e,l,n){var i;return null!=(i=e.if.call(null!=a?a:{},null!=a?a.isVideo:a,{name:"if",hash:{},fn:t.program(8,n,0),inverse:t.program(10,n,0),data:n}))?i:""},8:function(t,a,e,l,n){var i,s=null!=a?a:{},h=e.helperMissing,r=t.escapeExpression;return'\t\t<div class="videoplayer main-photo" style="width:'+r("function"==typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)?i.call(s,{name:"width",hash:{},data:n}):i)+"px; height:"+r("function"==typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)?i.call(s,{name:"height",hash:{},data:n}):i)+'px;"><video id="video_1" poster="'+r("function"==typeof(i=null!=(i=e.src||(null!=a?a.src:a))?i:h)?i.call(s,{name:"src",hash:{},data:n}):i)+'" class="video-js vjs-big-play-centered inherit-size"></video></div>\n'},10:function(t,a,e,l,n){var i;return"\n"+(null!=(i=e.if.call(null!=a?a:{},null!=a?a.showFuzzy:a,{name:"if",hash:{},fn:t.program(11,n,0),inverse:t.program(13,n,0),data:n}))?i:"")},11:function(t,a,e,l,n){var i,s=null!=a?a:{},h=e.helperMissing,r=t.escapeExpression;return'\t\t<span class="restricted-image main-photo" style="width:'+r("function"==typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)?i.call(s,{name:"width",hash:{},data:n}):i)+"px;height:"+r("function"==typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)?i.call(s,{name:"height",hash:{},data:n}):i)+'px;">\n\t\t</span>\n'},13:function(t,a,e,l,n){var i,s=null!=a?a:{},h=e.helperMissing,r="function",o=t.escapeExpression;return'\t\t<span class="facade-of-protection-neue" style="width:'+o(typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)===r?i.call(s,{name:"width",hash:{},data:n}):i)+"px;height:"+o(typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)===r?i.call(s,{name:"height",hash:{},data:n}):i)+'px;">\n\t\t\t'+o((e.outlet||a&&a.outlet||h).call(s,null!=a?a["zoom-view"]:a,{name:"outlet",hash:{},data:n}))+"\n\t\t\t"+o((e.outlet||a&&a.outlet||h).call(s,null!=a?a["vr-overlay-view"]:a,{name:"outlet",hash:{},data:n}))+'\n\t\t</span>\n\n\t\t<img width="'+o(typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)===r?i.call(s,{name:"width",hash:{},data:n}):i)+'" height="'+o(typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)===r?i.call(s,{name:"height",hash:{},data:n}):i)+'" src="'+o(typeof(i=null!=(i=e.src||(null!=a?a.src:a))?i:h)===r?i.call(s,{name:"src",hash:{},data:n}):i)+'" class="low-res-photo" alt="'+o(typeof(i=null!=(i=e.imgAltText||(null!=a?a.imgAltText:a))?i:h)===r?i.call(s,{name:"imgAltText",hash:{},data:n}):i)+'">\n\t\t<img width="'+o(typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)===r?i.call(s,{name:"width",hash:{},data:n}):i)+'" height="'+o(typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)===r?i.call(s,{name:"height",hash:{},data:n}):i)+'" src="'+o(typeof(i=null!=(i=e.highResSrc||(null!=a?a.highResSrc:a))?i:h)===r?i.call(s,{name:"highResSrc",hash:{},data:n}):i)+'" class="main-photo is-hidden" alt="'+o(typeof(i=null!=(i=e.imgAltText||(null!=a?a.imgAltText:a))?i:h)===r?i.call(s,{name:"imgAltText",hash:{},data:n}):i)+'">\n\t\t<script nonce="'+o(typeof(i=null!=(i=e.cspNonce||(null!=a?a.cspNonce:a))?i:h)===r?i.call(s,{name:"cspNonce",hash:{},data:n}):i)+"\">\n\t\tvar img = document.querySelector('.photo-well-media-scrappy-view img.main-photo');\n\t\timg.onload = function () { registerFirstPhoto(img); };\n\t\t<\/script>\n\t\t<noscript>\n\t\t\t<img width=\""+o(typeof(i=null!=(i=e.width||(null!=a?a.width:a))?i:h)===r?i.call(s,{name:"width",hash:{},data:n}):i)+'" height="'+o(typeof(i=null!=(i=e.height||(null!=a?a.height:a))?i:h)===r?i.call(s,{name:"height",hash:{},data:n}):i)+'" src="'+o(typeof(i=null!=(i=e.highResSrc||(null!=a?a.highResSrc:a))?i:h)===r?i.call(s,{name:"highResSrc",hash:{},data:n}):i)+'" class="main-photo" alt="'+o(typeof(i=null!=(i=e.imgAltText||(null!=a?a.imgAltText:a))?i:h)===r?i.call(s,{name:"imgAltText",hash:{},data:n}):i)+'">\n\t\t</noscript>\n'},compiler:[7,">= 4.0.0"],main:function(t,a,e,l,n){var i;return null!=(i=e.if.call(null!=a?a:{},null!=a?a.needsInterstitial:a,{name:"if",hash:{},fn:t.program(1,n,0),inverse:t.program(7,n,0),data:n}))?i:""},useData:!0}),l={};t.Array.each([],function(a){var e=t.Template.get("hermes/"+a);e&&(l[a]=e)}),t.Template.register("hermes/photo-well-media-scrappy",function(a,n){return n=n||{},n.partials=n.partials?t.merge(l,n.partials):l,e(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-page-moola",function(e,a){var l=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,l,r,n){var t,s=null!=a?a:{},i=l.helperMissing,u=e.escapeExpression;return'<iframe src="'+u("function"==typeof(t=null!=(t=l["ad-url"]||(null!=a?a["ad-url"]:a))?t:i)?t.call(s,{name:"ad-url",hash:{},data:n}):t)+'" scrolling="no"></iframe>\n<a href="'+u("function"==typeof(t=null!=(t=l["upsell-url"]||(null!=a?a["upsell-url"]:a))?t:i)?t.call(s,{name:"upsell-url",hash:{},data:n}):t)+'" id="interstitial-photo-upsell" style="display:none"></a>\n'},useData:!0}),r={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(r[a]=l)}),e.Template.register("hermes/photo-page-moola",function(a,n){return n=n||{},n.partials=n.partials?e.merge(r,n.partials):r,l(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-well-media-scrappy-view",function(e,t){var i,n=require("hermes-core/flog")(t);i={photo:{render:function(){var t,i,n,o=this,a=this.get("photo"),s="";return o.preloadImage&&(o.preloadImage.onload=null),this.appContext.forceServerRender?i=t=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}):(t=this.getPhotoForDisplay(),i=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),a.getValue("owner")&&(s=""===a.getValue("title").trim()?this.intlMessage({intlName:"common.UNTITLED"}):a.getValue("title"),s+=" | "+this.intlMessage({intlName:"common.BY_USER",user:a.getValue("owner").getValue("username")})),(n=this.get("container").one(".main-photo"))&&parseInt(n.getAttribute("width"),10)===t.width&&parseInt(n.getAttribute("height"),10)===t.height||this.setContainerWithTemplate("photo-well-media-scrappy",{width:t.width,height:t.height,src:i.url,highResSrc:t.url,imgAltText:s,needsInterstitial:a.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,isMinor:this.appContext.getViewer().isMinor}),YUI.Env.isServer?(this.serverWidth=t.width,this.serverHeight=t.height):a.getValue("needsInterstitial")||(o.preloadImage=new Image,o.preloadImage.onload=function(){if(!this.onloadFired&&o.isActiveAndInDOM()){this.onloadFired=!0;var i,n="photoPageShowedSize",a="ø";try{(i=/(?:_([a-z]))?\.jpg/.exec(t.url))&&i[1]&&(a=i[1])}catch(e){}finally{n+=String(a).toUpperCase()}e.rapidTracker.beacon(this.name,n);var s=o.get("container").one(".low-res-photo");o.get("container").one(".main-photo").removeClass("is-hidden").show(),s.hide()}},o.preloadImage.src=t.url,o.preloadImage.complete&&o.preloadImage.onload()),this}},video:{render:function(){var e=this.get("photo"),t=this.getPhotoForDisplay({excludeSizes:[]}),i=t.url;return this.appContext.flipper.isFlipped("disable-video-playback")&&(i="/images/en-us/video-unavailable.png"),!this.player||e.getValue("isVideoPending")?(this.setContainerWithTemplate("photo-well-media-scrappy",{width:t.width,height:t.height,src:i,needsInterstitial:e.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":"",isPending:e.getValue("isVideoPending")}),this):(e.getValue("isVideoPending")||(this.player.dimension?(this.player.dimension("width",t.width),this.player.dimension("height",t.height)):this.player.resize(t.width,t.height)),this)}},ad:{render:function(){return this.adId=e.guid(),this.setContainerWithTemplate("photo-page-moola",{"ad-url":e.config.flickr.moola.endpoint+"?ad2=1&ad_id="+this.adId,"upsell-url":e.config.flickr.moola.campaigns.joincommunity.photopagelink}),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"vr-overlay-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,destinationContainer:".photo-well-media-scrappy-view",disabled:function(){return!this.appContext.flipper.isFlipped("enable-vr")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then(function(i){if(t.set("photo",i),i.getValue("isVideo"))return new e.Promise(function(t,i){e.use("flickr-video-player",function(){t()})})})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this),!YUI.Env.isServer&&this.subviews["vr-overlay-view"]&&this.subviews["vr-overlay-view"].get("canVr")&&this.subviews["zoom-view"]&&(this.canVR=!0,this.subviews["zoom-view"].destroy({remove:!0})),this.get("photo").getValue("needsInterstitial")?this.get("container").addClass("has-interstitial"):this.get("container").removeClass("has-interstitial"),this},handleInterstitialDismissButtonClick:function(t){var i=this,o=this.get("personPreferences"),a=this.get("photo"),s=a.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),o.setValue("safeSearch",s),o.registry.remoteUpdate(i.appContext.auth.user.nsid).then(function(e){a.registry.attributeSearch({needsInterstitial:!0}).forEach(function(e){a.registry.getValue(e,"safetyLevel")<=o.getValue("safeSearch")&&a.registry.setValue(e,"needsInterstitial",!1)}),i.buildContainer(),i.fire("subviewViewEvent","photoWellResized")},function(e){n.error({err:e}),i.onError(i.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&"photoWellResized"===t[0]&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t,i=this;return this.get("photo").getValue("isVideo")&&!this.get("photo").getValue("isVideoPending")&&(i.player=new e.FlickrVideoPlayer({container:i.get("container").one(".videoplayer"),model:i.get("photo"),appContext:i.appContext,videoNode:e.one("#video_1")?e.one("#video_1")._node:null,controlBar:{fullscreenToggle:!1}}),i.player.init().then(function(){}),i.on("destroy",function(){i.player&&(i.player.destroy(),i.player=null)})),this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){i.set("canvasSizeIsDirty",!0),i.buildContainer()})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",i.appContext.auth.user.nsid).then(function(e){i.set("personPreferences",e),i.get("photo").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&i.get("container").one(".restricted-interstitial-message button")&&i.registerEventHandler(i.get("container").one(".restricted-interstitial-message button").on("click",i.handleInterstitialDismissButtonClick,i))}),this.isAd&&(e.on("no_ad_event",function(e){e===i.adId&&(clearTimeout(t),i.showUpsell())}),e.on("ad_event",function(e){e===i.adId&&clearTimeout(t)}),t=setTimeout(function(){i.showUpsell()},3e3)),this},showUpsell:function(){var e=this.get("container"),t=e.one("#interstitial-photo-upsell"),i=e.one("iframe");t&&t.addClass("show-upsell"),i&&i.setStyle("display","none")},onError:function(t){new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:this.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,classList:"scrappy-dialog"}).show()},getPhotoForDisplay:function(e){var t,i,n,o=this.getCanvasSize(),a=this.getPixelRatio();return e&&e.canvasSize&&(o=e.canvasSize),t=this.get("photo").getSizeToFit(o,e),i=Math.min(o.height/a,t.height),n=Math.min(o.width/a,t.width/t.height*i),i=Math.min(i,t.height/t.width*n),{width:Math.round(n),height:Math.round(i),url:t.url,pixelRatio:t.width/n}},getCanvasSize:function(){var e,t,i,n,o,a,s=this.getPixelRatio(),r=this.get("container"),h={width:500,height:500};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(t=this.get("container").ancestor(),i=r.getStyle("paddingTop")?parseInt(r.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,n=r.getStyle("paddingBottom")?parseInt(r.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,a=40,o=40,t&&((e=t.get("region")).height=parseInt(t.getStyle("height").match(/[0-9]+/)[0],10)-(i+n),e.width=this.appContext.viewportData.viewport.width-(a+o))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(h={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:500,right:500,width:h.width,height:h.height}),e.height*=s,e.width*=s,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flickr-view","moment","vr-overlay-view","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-photo-page-moola"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-context-slider-photo",function(a,e){var l=a.Template.Handlebars.revive({1:function(a,e,l,t,n){return"currentImage"},3:function(a,e,l,t,n){return"restricted-image"},5:function(a,e,l,t,n){return"\t\t<span class='play-slideshow'>&#9654;</span>\n\t\t<span class='countdown-slideshow'></span>\n"},compiler:[7,">= 4.0.0"],main:function(a,e,l,t,n){var r,s,i=null!=e?e:{},o=l.helperMissing,u="function",c=a.escapeExpression;return'<a class="context-thumb emptyImage '+(null!=(r=l.if.call(i,null!=e?e.currentPhoto:e,{name:"if",hash:{},fn:a.program(1,n,0),inverse:a.noop,data:n}))?r:"")+" "+(null!=(r=l.if.call(i,null!=e?e.needsInterstitial:e,{name:"if",hash:{},fn:a.program(3,n,0),inverse:a.noop,data:n}))?r:"")+'" href="'+c(typeof(s=null!=(s=l.url||(null!=e?e.url:e))?s:o)===u?s.call(i,{name:"url",hash:{},data:n}):s)+'" data-track="contextSliderNextPhotoClick" style="background-image: url('+c(typeof(s=null!=(s=l.background||(null!=e?e.background:e))?s:o)===u?s.call(i,{name:"background",hash:{},data:n}):s)+"); left: "+c(typeof(s=null!=(s=l.left||(null!=e?e.left:e))?s:o)===u?s.call(i,{name:"left",hash:{},data:n}):s)+'px" data-photo-id="'+c(typeof(s=null!=(s=l.id||(null!=e?e.id:e))?s:o)===u?s.call(i,{name:"id",hash:{},data:n}):s)+'" title="'+c(typeof(s=null!=(s=l.title||(null!=e?e.title:e))?s:o)===u?s.call(i,{name:"title",hash:{},data:n}):s)+'" tabindex="-1">\n'+(null!=(r=l.if.call(i,null!=e?e.currentPhoto:e,{name:"if",hash:{},fn:a.program(5,n,0),inverse:a.noop,data:n}))?r:"")+"</a>\n"},useData:!0}),t={};a.Array.each([],function(e){var l=a.Template.get("hermes/"+e);l&&(t[e]=l)}),a.Template.register("hermes/context-slider-photo",function(e,n){return n=n||{},n.partials=n.partials?a.merge(t,n.partials):t,l(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-context-slider-scrappy",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,a,r){var l=null!=n?n:{},s=e.helperMissing,o=t.escapeExpression;return"\t<div class='loadingError'>\n\t\t<p>"+o((e.intlMessage||n&&n.intlMessage||s).call(l,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ERROR_LOADING_CONTEXT"},data:r}))+'</p>\n\t\t<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">'+o((e.intlMessage||n&&n.intlMessage||s).call(l,{name:"intlMessage",hash:{intlName:"common.RETRY"},data:r}))+"</button></p>\n\t</div>\n"},3:function(t,n,e,a,r){var l,s=null!=n?n:{};return"\n\t<div class='context-slider small-slider "+(null!=(l=e.if.call(s,null!=n?n.slideshowEnabled:n,{name:"if",hash:{},fn:t.program(4,r,0),inverse:t.noop,data:r}))?l:"")+'\'>\n\n\t\t<div class="wrapper is-ready clear-float small-photos">\n\n\t\t\t<div class="slider">\n\n'+(null!=(l=e.each.call(s,null!=n?n.previousPhotos:n,{name:"each",hash:{},fn:t.program(6,r,0),inverse:t.noop,data:r}))?l:"")+"\n"+(null!=(l=e.if.call(s,null!=n?n["is-ad"]:n,{name:"if",hash:{},fn:t.program(8,r,0),inverse:t.program(10,r,0),data:r}))?l:"")+"\n\n"+(null!=(l=e.each.call(s,null!=n?n.nextPhotos:n,{name:"each",hash:{},fn:t.program(6,r,0),inverse:t.noop,data:r}))?l:"")+"\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n"+(null!=(l=e.if.call(s,null!=n?n.showBigSlider:n,{name:"if",hash:{},fn:t.program(13,r,0),inverse:t.noop,data:r}))?l:"")+"\n"},4:function(t,n,e,a,r){return"slideshowEnabled"},6:function(t,n,e,a,r){var l;return null!=(l=t.invokePartial(a["context-slider-photo"],n,{name:"context-slider-photo",data:r,indent:"\t\t\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?l:""},8:function(t,n,e,a,r){return'\t\t\t\t\t<a class="context-thumb middle currentImage adThumb">Ad</a>\n'},10:function(t,n,e,a,r){var l;return null!=(l=e.each.call(null!=n?n:{},null!=n?n.currentPhoto:n,{name:"each",hash:{},fn:t.program(11,r,0),inverse:t.noop,data:r}))?l:""},11:function(t,n,e,a,r){var l;return null!=(l=t.invokePartial(a["context-slider-photo"],n,{name:"context-slider-photo",data:r,indent:"\t\t\t\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?l:""},13:function(t,n,e,a,r){var l,s=null!=n?n:{},o=e.helperMissing,i=t.escapeExpression;return"\t\t<div class='context-slider big-slider "+(null!=(l=e.if.call(s,null!=n?n.slideshowEnabled:n,{name:"if",hash:{},fn:t.program(4,r,0),inverse:t.noop,data:r}))?l:"")+'\'>\n\n\t\t\t<span class="nav nav-l">\n\t\t\t\t<span class="hide-text">&larr;</span>\n\t\t\t</span>\n\n\t\t\t<div class="wrapper clear-float">\n\n\t\t\t\t<div class="slider">\n\n\t\t\t\t\t'+i((e.renderTrustedMarkup||n&&n.renderTrustedMarkup||o).call(s,null!=n?n.previousBigPhotos:n,{name:"renderTrustedMarkup",hash:{},data:r}))+"\n\n"+(null!=(l=e.if.call(s,null!=n?n["is-ad"]:n,{name:"if",hash:{},fn:t.program(14,r,0),inverse:t.program(16,r,0),data:r}))?l:"")+"\n\t\t\t\t\t"+i((e.renderTrustedMarkup||n&&n.renderTrustedMarkup||o).call(s,null!=n?n.nextBigPhotos:n,{name:"renderTrustedMarkup",hash:{},data:r}))+'\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<span class="nav nav-r">\n\t\t\t\t<span class="hide-text">&rarr;</span>\n\t\t\t</span>\n\n\t\t</div>\n'},14:function(t,n,e,a,r){return'\t\t\t\t\t\t<a class="context-thumb middle currentImage adThumb">Ad</a>\n'},16:function(t,n,e,a,r){var l;return null!=(l=e.each.call(null!=n?n:{},null!=n?n.currentPhoto:n,{name:"each",hash:{},fn:t.program(17,r,0),inverse:t.noop,data:r}))?l:""},17:function(t,n,e,a,r){var l;return null!=(l=t.invokePartial(a["context-slider-photo"],n,{name:"context-slider-photo",data:r,indent:"\t\t\t\t\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?l:""},compiler:[7,">= 4.0.0"],main:function(t,n,e,a,r){var l;return null!=(l=e.if.call(null!=n?n:{},null!=n?n.loadingError:n,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.program(3,r,0),data:r}))?l:""},usePartial:!0,useData:!0}),a={};t.Array.each(["context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo"],function(n){var e=t.Template.get("hermes/"+n);e&&(a[n]=e)}),t.Template.register("hermes/context-slider-scrappy",function(n,r){return r=r||{},r.partials=r.partials?t.merge(a,r.partials):a,e(n,r)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo"]});YUI.add("hermes-template-context-image",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,l,n){var r;return'\n\t<a data-loaded="false" style="left:'+e.escapeExpression("function"==typeof(r=null!=(r=t.left||(null!=a?a.left:a))?r:t.helperMissing)?r.call(null!=a?a:{},{name:"left",hash:{},data:n}):r)+';float:left;display:block;position:absolute;background-color:gray;height:40px;width:86px;border:1px solid transparent;" href="#">\n\t\t\n\t</a>\n\n'},compiler:[7,">= 4.0.0"],main:function(e,a,t,l,n){var r;return null!=(r=t.each.call(null!=a?a:{},null!=a?a.images:a,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:""},useData:!0}),l={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(l[a]=t)}),e.Template.register("hermes/context-image",function(a,n){return n=n||{},n.partials=n.partials?e.merge(l,n.partials):l,t(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-context-text",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var r,s=null!=t?t:{},i=a.helperMissing,p=e.escapeExpression;return'\n\n<span data-loaded="true" style="left:'+p("function"==typeof(r=null!=(r=a.left||(null!=t?t.left:t))?r:i)?r.call(s,{name:"left",hash:{},data:n}):r)+';float:left;display:block;position:absolute;height:40px;width:86px;border:1px solid #ccc;" href="#">\n\t'+p("function"==typeof(r=null!=(r=a.text||(null!=t?t.text:t))?r:i)?r.call(s,{name:"text",hash:{},data:n}):r)+"\n</span>\n\n"},useData:!0}),l={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)}),e.Template.register("hermes/context-text",function(t,n){return n=n||{},n.partials=n.partials?e.merge(l,n.partials):l,a(t,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("context-slider-scrappy-view",function(t,e){var o=require("hermes-core/flog")(e);t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.contextData=t.clone(e.context,!0),this.currentPosition=0,this.numberOfPhotosEitherSideInViewPort=3,this.numberOfPositionsToMove=3,this.numberOfPositionsToBuffer=3,this.positionsLoadedNext=0,this.positionsLoadedPrev=0,this.positionsAheadLimit=25,this.numberOfPositionsToPreFetch=e.numberOfPositionsToPreFetch,this.numberOfPositionsToRefetchAt=e.numberOfPositionsToRefetchAt,this.photoWidth=50,this.photoMargin=15,this.photoWidthPlusMargin=65,this.photoWidthSmall=20,this.photoMarginSmall=5,this.photoWidthPlusMarginSmall=25,this.atStart=!1,this.atEnd=!1,this.isAd=!!e.ad,this.photosInSlider={},YUI.Env.isServer||"true"!==t.StorageHelper.getItem("slideshowInProgress")?this.slideshowInProgress=!1:this.slideshowInProgress=!0,this.slideshowDwellSeconds=5,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var e=this,i=e.contextData;return new t.FlickrPromise({photo:e.appContext.getModel("photo-models",e.photoId),context:e.appContext.getModel(i.modelName,i.params)}).then(function(t){e.set("photo",t.photo),e.set("contextModel",t.context)},function(t){if(!t.getModelFailure&&1!==t.code||"photostream-models"===i.modelName)throw t;return e.contextData.modelName="photostream-models",e.appContext.getModel("photo-models",e.photoId).then(function(t){return e.set("photo",t),e.contextData.params.id=e.get("photo").getValue("owner").getValue("nsid"),e.appContext.getModel("photostream-models",e.contextData.params).then(function(t){e.set("contextModel",t)})})}).then(function(){var o=t.merge(i.params,{photoId:e.photoId,numNext:e.numberOfPositionsToPreFetch,numPrev:e.numberOfPositionsToPreFetch,refetchAt:e.numberOfPositionsToRefetchAt});return e.get("contextModel").getValue("photoContextList").getContext(o)}).then(function(t){e.positionsLoadedNext=e.positionsLoadedNext+t.next.length,e.positionsLoadedPrev=e.positionsLoadedPrev+t.previous.length,e.photosInSlider[0]=e.get("photo").getValue("id"),e.set("initialContextResponse",t)},function(t){if(t.notInContext||99===t.code)return e.get("contextModel").setValue("photoContextList",[]),e.contextData.modelName="photostream-models",e.contextData.params.id=e.get("photo").getValue("owner").getValue("nsid"),e.loadState();throw t}).then(null,function(t){throw o.error("There was a problem loading the context slider data.",{err:t}),t})},assignContextPositionsAndAddToDOM:function(t){var e,o,i,s=this.get("container"),n=s.one(".small-slider .slider"),r=s.one(".big-slider .slider"),h=t.contextResponse;for(i=0;i<h.previous.length;i++)o=-1-i,void 0===this.photosInSlider[o]&&(e=h.previous[i].toJSON(),this.photosInSlider[o]=h.previous[i].getValue("id"),e.left=o*this.photoWidthPlusMarginSmall,e.background=this.getBackgroundImage(h.previous[i]),e.url=this.getContextifiedURLForPhoto(h.previous[i]),n.append(this.templates("context-slider-photo")(e)),e.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(e)));for(i=0;i<h.next.length;i++)o=1+i,void 0===this.photosInSlider[o]&&(e=h.next[i].toJSON(),this.photosInSlider[o]=h.next[i].getValue("id"),e.left=o*this.photoWidthPlusMarginSmall,e.background=this.getBackgroundImage(h.next[i]),e.url=this.getContextifiedURLForPhoto(h.next[i]),n.append(this.templates("context-slider-photo")(e)),e.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(e)))},checkBoundary:function(t){var e=t.contextResponse,o=t.requestedPreviousAmount,i=t.requestedNextAmount,s=t.positionWhenChecking,n=this.get("contextModel").getValue("photoContextList"),r=this.get("container"),h=r.one(".nav-l"),a=r.one(".nav-r");this.currentPosition-this.numberOfPhotosEitherSideInViewPort>this.positionsLoadedNext&&this.move(-Math.abs(this.currentPosition-this.positionsLoadedNext)),this.currentPosition<0&&Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)>this.positionsLoadedPrev&&this.move(Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)-this.positionsLoadedPrev),n.hasMinBoundary()&&e.previous.length-Math.abs(s)<=this.numberOfPhotosEitherSideInViewPort&&o>0&&(h.hide(),this.atStart=!0),n.hasMaxBoundary()&&e.next.length-Math.abs(s)<=this.numberOfPhotosEitherSideInViewPort&&i>0&&(a.hide(),this.atEnd=!0)},buildContainer:function(){function t(t,e,s,n){t>3&&(t=3);for(var r=o[e],h="",a=0;a<t;a++){var l=r[a],d=l.toJSON(),u=(a+1)*i.photoWidthPlusMarginSmall*n;d.background=i.getBackgroundImage(l),d.currentPhoto=!1,d.url=i.getContextifiedURLForPhoto(l),d.left=u/i.photoWidthPlusMarginSmall*i.photoWidthPlusMargin,h+=i.templates("context-slider-photo")(d),d.left=u,s.push(d),i.photosInSlider[""+(a+1)*n]=d}return h}var e=this.get("photo").toJSON(),o=this.get("initialContextResponse"),i=this;e.background=this.getBackgroundImage(this.get("photo")),e.left=0,e.currentPhoto=!0,e.url=this.getContextifiedURLForPhoto(this.get("photo"));var s=[],n=[],r="",h="";this.positionsLoadedNext>0&&(h=t(this.positionsLoadedNext,"next",s,1)),this.positionsLoadedPrev>0&&(r=t(this.positionsLoadedPrev,"previous",n,-1)),this.setContainerWithTemplate("context-slider-scrappy",{previousPhotos:n,nextPhotos:s,previousBigPhotos:r,nextBigPhotos:h,currentPhoto:[e],slideshowEnabled:this.appContext.flipper.isFlipped("enable-photopage-slideshow"),"is-ad":this.isAd,showBigSlider:!this.appContext.forceServerRender}),this.isAd&&(o.next.pop(),o.next=[this.get("photo")].concat(o.next))},buildErrorContainer:function(){this.setContainerWithTemplate("context-slider-scrappy",{loadingError:!0})},activate:function(){var e,o,i=this,s=i.get("container"),n=s.one(".big-slider"),r=!1,h=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,a=this.numberOfPhotosEitherSideInViewPort;return this.assignContextPositionsAndAddToDOM({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a}),this.checkBoundary({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:a,requestedNextAmount:a,positionWhenChecking:this.currentPosition}),"true"===t.StorageHelper.getItem("showBigContextSlider")?(s.addClass("hover"),setTimeout(function(){s.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),s.all(".context-slider").setStyle("transition","opacity 300ms ease-out")},300)):(s.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),s.all(".context-slider").setStyle("transition","opacity 300ms ease-out")),this.appContext.flipper.isFlipped("enable-photopage-slideshow")&&(this.slideshowInProgress&&this.startSlideshow(),this.get("container").all(".currentImage")&&this.registerEventHandler(this.get("container").all(".currentImage").on("click",function(t){t.preventDefault(),i.slideshowInProgress?i.stopSlideshow():i.startSlideshow()}))),t.use("transition",function(t){var a=i.get("container").one(".nav-l"),l=i.get("container").one(".nav-r");a&&i.registerEventHandler(a.on("click",function(){s.setStyle("transition","opacity 300ms ease-out"),t.rapidTracker.beacon(i.name,"contextSliderMoveLeftClick"),i.move(-1*i.numberOfPositionsToMove)})),l&&i.registerEventHandler(l.on("click",function(){s.setStyle("transition","opacity 300ms ease-out"),t.rapidTracker.beacon(i.name,"contextSliderMoveRightClick"),i.move(1*i.numberOfPositionsToMove)})),h&&(i.attachKeyEvent("down:188",t.betterThrottle(function(e){t.rapidTracker.beacon(i.name,"contextSliderMoveLeftKeyPress"),s.addClass("hover"),i.bringIntoFocus(),i.atStart||i.move(-1*i.numberOfPositionsToMove)},20)),i.attachKeyEvent("down:190",t.betterThrottle(function(e){t.rapidTracker.beacon(i.name,"contextSliderMoveRightKeyPress"),s.addClass("hover"),i.bringIntoFocus(),i.atEnd||i.move(1*i.numberOfPositionsToMove)},20))),i.registerEventHandler(s.on("hover",function(){r=!0,clearTimeout(e),e=setTimeout(function(){r&&s.addClass("hover")},150)},function(){r=!1,clearTimeout(o),t.StorageHelper.setItem("showBigContextSlider","false"),o=setTimeout(function(){r||(s.setStyles({width:"100%",height:"80px"}),n.setStyle("height","80px"),s.removeClass("hover"),setTimeout(function(){s.removeAttribute("style"),n.removeAttribute("style")},300))},500)})),s.all(".context-thumb:not(.currentImage)")&&i.registerEventHandler(s.all(".context-thumb:not(.currentImage)").on("click",function(){t.StorageHelper.setItem("showBigContextSlider","true")}))}),this},startSlideshow:function(){function e(){0===s&&o.slideshowInProgress?o.appContext.flapp.navigate(i):(n.all(".currentImage .countdown-slideshow").set("text",s),s-=1)}this.slideshowInProgress=!0;var o=this,i=this.getContextifiedURLForPhoto(this.get("initialContextResponse").next[0]),s=this.slideshowDwellSeconds,n=this.get("container");t.StorageHelper.setItem("slideshowInProgress","true"),n.all(".currentImage .play-slideshow").hide(),e(),this.slideshowTimer=setInterval(function(){e()},1e3)},stopSlideshow:function(){this.slideshowInProgress=!1,this.get("container").all(".currentImage .countdown-slideshow").set("text",""),this.get("container").all(".currentImage .play-slideshow").show(),clearInterval(this.slideshowTimer),t.StorageHelper.setItem("slideshowInProgress","false")},move:function(e){var o,i,s,n,r,h=this,a=this.get("contextModel").getValue("photoContextList"),l=e>0?"right":"left",d=this.get("container"),u=d.one(".big-slider .slider"),p=d.one(".small-slider .slider"),c=d.one(".nav-l"),g=d.one(".nav-r");return!("right"===l&&this.currentPosition-this.positionsLoadedNext>this.positionsAheadLimit)&&(!("left"===l&&this.currentPosition<=0&&Math.abs(this.currentPosition)-this.positionsLoadedPrev>this.positionsAheadLimit)&&(d.addClass("hover"),this.currentPosition+=e,r=this.currentPosition,void 0!==this.photosInSlider[this.currentPosition+this.numberOfPhotosEitherSideInViewPort+1]&&(g.show(),this.atEnd=!1),void 0!==this.photosInSlider[this.currentPosition-(this.numberOfPhotosEitherSideInViewPort+1)]&&(c.show(),this.atStart=!1),o=this.currentPosition*this.photoWidthPlusMargin*-1,i=this.currentPosition*this.photoWidthPlusMarginSmall*-1,u.transition({left:o+"px",duration:.3,easing:"ease-out"}),p.setStyle("left",i+"px"),"right"===l?s=this.currentPosition+this.numberOfPositionsToMove+this.numberOfPositionsToBuffer:"left"===l&&(s=this.currentPosition-(this.numberOfPositionsToMove+this.numberOfPositionsToBuffer)),void(void 0===this.photosInSlider[s]&&(n=t.merge(h.contextData.params,{photoId:this.get("photo").getValue("id"),refetchAt:this.numberOfPositionsToRefetchAt}),"right"===l?n.numNext=Math.abs(s)+this.numberOfPositionsToPreFetch:"left"===l&&(n.numPrev=Math.abs(s)+this.numberOfPositionsToPreFetch),a.getContext(n).then(function(t){h.positionsLoadedNext=void 0!==n.numNext?n.numNext:h.positionsLoadedNext,h.positionsLoadedPrev=void 0!==n.numPrev?n.numPrev:h.positionsLoadedPrev,h.assignContextPositionsAndAddToDOM({contextResponse:t,requestedPreviousAmount:n.numPrev,requestedNextAmount:n.numNext}),h.checkBoundary({contextResponse:t,requestedPreviousAmount:n.numPrev,requestedNextAmount:n.numNext,positionWhenChecking:r})},function(t){h.checkBoundary({contextResponse:{previous:[],next:[]},requestedPreviousAmount:n.numPrev,requestedNextAmount:n.numNext,positionWhenChecking:r})})))))},getBackgroundImage:function(t){var e,o,i=this.appContext.getViewer().getPixelRatio();return e={width:this.photoWidth*i,height:this.photoWidth*i},o={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},t.getSizeToFit(e,o).url},getContextifiedURLForPhoto:function(e){if(e){return t.URLHelper.getPhotoPage({photoId:e.getValue("id"),pathAlias:e.getValue("owner").getValue("pathAlias"),contextSuffix:this.get("contextModel").getValue("urlSuffix")})}},beforeDestroy:function(){clearInterval(this.slideshowTimer)}})},"@VERSION@",{requires:["flickr-view","hermes-template-context-slider-scrappy","hermes-template-context-slider-photo","hermes-template-context-image","hermes-template-context-text","storage-helper"],optional:[],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-photo-engagement",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,l,t){return"\t"+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["photo-well-scrappy-edit-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},3:function(e,n,a,l,t){return"\t"+e.escapeExpression((a.outlet||n&&n.outlet||a.helperMissing).call(null!=n?n:{},null!=n?n["fave-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},5:function(e,n,a,l,t){return"disabled"},7:function(e,n,a,l,t){var s,r=null!=n?n:{},i=a.helperMissing,o=e.escapeExpression;return'\t\t<a href="'+o("function"==typeof(s=null!=(s=a.downloadLink||(null!=n?n.downloadLink:n))?s:i)?s.call(r,{name:"downloadLink",hash:{},data:t}):s)+'" class="server-only-link" title="'+o((a.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_VIDEO"},data:t}))+'">\n'},9:function(e,n,a,l,t){var s,r=null!=n?n:{},i=a.helperMissing,o=e.escapeExpression;return'\t\t<a href="'+o("function"==typeof(s=null!=(s=a.downloadLink||(null!=n?n.downloadLink:n))?s:i)?s.call(r,{name:"downloadLink",hash:{},data:t}):s)+'" title="'+o((a.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_PHOTO"},data:t}))+'">\n'},11:function(e,n,a,l,t){return'\t\t<div class="display-obscured-download-sizes">\n\t\t\t'+e.escapeExpression((a.renderTrustedMarkup||n&&n.renderTrustedMarkup||a.helperMissing).call(null!=n?n:{},null!=n?n.downloadItems:n,{name:"renderTrustedMarkup",hash:{},data:t}))+"\n\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,l,t){var s,r=null!=n?n:{},i=a.helperMissing,o=e.escapeExpression;return(null!=(s=a.if.call(r,null!=n?n.viewerIsOwner:n,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.program(3,t,0),data:t}))?s:"")+"\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["share-view"]:n,{name:"outlet",hash:{},data:t}))+'\n\n<div class="download '+(null!=(s=a.unless.call(r,null!=n?n.downloadingAvailable:n,{name:"unless",hash:{},fn:e.program(5,t,0),inverse:e.noop,data:t}))?s:"")+'">\n'+(null!=(s=a.if.call(r,null!=n?n.isVideo:n,{name:"if",hash:{},fn:e.program(7,t,0),inverse:e.program(9,t,0),data:t}))?s:"")+'\t\t\t<i class="ui-icon-download"></i>\n\t\t</a>\n\n'+(null!=(s=a.if.call(r,null!=n?n.downloadItems:n,{name:"if",hash:{},fn:e.program(11,t,0),inverse:e.noop,data:t}))?s:"")+"\n</div>\n\n"+o((a.outlet||n&&n.outlet||i).call(r,null!=n?n["photo-sidebar-toggle-view"]:n,{name:"outlet",hash:{},data:t}))+"\n"},useData:!0}),l={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)}),e.Template.register("hermes/photo-engagement",function(n,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,a(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-scrappy-download-menu",function(l,a){var e=l.Template.Handlebars.revive({1:function(l,a,e,n,t){var s;return null!=(s=e.each.call(null!=a?a:{},null!=a?a.sizes:a,{name:"each",hash:{},fn:l.program(2,t,0),inverse:l.noop,data:t}))?s:""},2:function(l,a,e,n,t){var s,r=null!=a?a:{},i=e.helperMissing,u="function",h=l.escapeExpression;return'\t\t    <li class="'+h(typeof(s=null!=(s=e.label||(null!=a?a.label:a))?s:i)===u?s.call(r,{name:"label",hash:{},data:t}):s)+'">\n\t\t\t    <a href="'+h(typeof(s=null!=(s=e.url||(null!=a?a.url:a))?s:i)===u?s.call(r,{name:"url",hash:{},data:t}):s)+'" data-track="downloadSizeSelected'+h(typeof(s=null!=(s=e.label||(null!=a?a.label:a))?s:i)===u?s.call(r,{name:"label",hash:{},data:t}):s)+'" class="download-image-size">\n\t\t\t\t    <span class="label">'+h(typeof(s=null!=(s=e.label||(null!=a?a.label:a))?s:i)===u?s.call(r,{name:"label",hash:{},data:t}):s)+'</span>\n\t\t\t\t    <span class="resolution">('+h(typeof(s=null!=(s=e.width||(null!=a?a.width:a))?s:i)===u?s.call(r,{name:"width",hash:{},data:t}):s)+" &times; "+h(typeof(s=null!=(s=e.height||(null!=a?a.height:a))?s:i)===u?s.call(r,{name:"height",hash:{},data:t}):s)+")</span>\n\t\t\t    </a>\n\t\t    </li>\n"},compiler:[7,">= 4.0.0"],main:function(l,a,e,n,t){var s,r=null!=a?a:{},i=l.escapeExpression;return'<ul class="sizes">\n'+(null!=(s=e.if.call(r,null!=a?a.showDownloadSizes:a,{name:"if",hash:{},fn:l.program(1,t,0),inverse:l.noop,data:t}))?s:"")+'\t<li><a href="'+i(l.lambda(null!=(s=null!=a?a.photo:a)?s.url:s,a))+'/sizes/l" class="all-sizes server-only-link" data-track="viewAllSizesClick">'+i((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(r,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.VIEW_ALL_SIZES"},data:t}))+"</a></li>\n</ul>"},useData:!0}),n={};l.Array.each([],function(a){var e=l.Template.get("hermes/"+a);e&&(n[a]=e)}),l.Template.register("hermes/scrappy-download-menu",function(a,t){return t=t||{},t.partials=t.partials?l.merge(n,t.partials):n,e(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-modal",function(n,t){var l=n.Template.Handlebars.revive({1:function(n,t,l,a,e){return" html-modal"},3:function(n,t,l,a,e){return" subview-modal"},5:function(n,t,l,a,e){return'<div class="close-x" aria-label="'+n.escapeExpression((l.intlMessage||t&&t.intlMessage||l.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.CLOSE"},data:e}))+'" tabindex="0"></div>'},7:function(n,t,l,a,e){var i;return'\t\t<div class="head">\n'+(null!=(i=l.if.call(null!=t?t:{},null!=t?t.navBarView:t,{name:"if",hash:{},fn:n.program(8,e,0),inverse:n.program(10,e,0),data:e}))?i:"")+'\t\t\t<div class="extra"></div>\n\t\t</div>\n'},8:function(n,t,l,a,e){return'\t\t\t\t<div class="nav"></div>\n'},10:function(n,t,l,a,e){var i;return'\t\t\t\t<div class="title">\n'+(null!=(i=l.if.call(null!=t?t:{},null!=t?t.title:t,{name:"if",hash:{},fn:n.program(11,e,0),inverse:n.program(13,e,0),data:e}))?i:"")+"\t\t\t\t</div>\n"},11:function(n,t,l,a,e){var i;return"\t\t\t\t\t\t"+n.escapeExpression("function"==typeof(i=null!=(i=l.title||(null!=t?t.title:t))?i:l.helperMissing)?i.call(null!=t?t:{},{name:"title",hash:{},data:e}):i)+"\n"},13:function(n,t,l,a,e){return"\t\t\t\t\t\t"+n.escapeExpression((l.renderTrustedMarkup||t&&t.renderTrustedMarkup||l.helperMissing).call(null!=t?t:{},null!=t?t.htmlTitle:t,{name:"renderTrustedMarkup",hash:{},data:e}))+"\n"},15:function(n,t,l,a,e){return" lines"},17:function(n,t,l,a,e){var i,r,s=null!=t?t:{},o=l.helperMissing;return'\t\t\t<div\n\t\t\t\tclass="content text-only '+(null!=(i=l.if.call(s,null!=t?t.noScroll:t,{name:"if",hash:{},fn:n.program(18,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(s,null!=t?t.showFooter:t,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(l.ifDefined||t&&t.ifDefined||o).call(s,null!=t?t.contentPadding:t,{name:"ifDefined",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression("function"==typeof(r=null!=(r=l.textMessage||(null!=t?t.textMessage:t))?r:o)?r.call(s,{name:"textMessage",hash:{},data:e}):r)+"\n\t\t\t</div>\n"},18:function(n,t,l,a,e){return" no-scroll"},20:function(n,t,l,a,e){return" has-footer"},22:function(n,t,l,a,e){var i,r,s=null!=t?t:{},o=l.helperMissing,u=n.escapeExpression;return"\n\t\t\t\t\tpadding-right: "+u("function"==typeof(r=null!=(r=l.contentPadding||(null!=t?t.contentPadding:t))?r:o)?r.call(s,{name:"contentPadding",hash:{},data:e}):r)+"px;\n\t\t\t\t\t"+(null!=(i=l.if.call(s,null!=t?t.showFooter:t,{name:"if",hash:{},fn:n.noop,inverse:n.program(23,e,0),data:e}))?i:"")+"\n\t\t\t\t\tpadding-left: "+u("function"==typeof(r=null!=(r=l.contentPadding||(null!=t?t.contentPadding:t))?r:o)?r.call(s,{name:"contentPadding",hash:{},data:e}):r)+"px;\n\t\t\t\t"},23:function(n,t,l,a,e){var i;return"padding-bottom: "+n.escapeExpression("function"==typeof(i=null!=(i=l.contentPadding||(null!=t?t.contentPadding:t))?i:l.helperMissing)?i.call(null!=t?t:{},{name:"contentPadding",hash:{},data:e}):i)+"px;"},25:function(n,t,l,a,e){var i,r=null!=t?t:{},s=l.helperMissing;return'\t\t\t<div\n\t\t\t\tclass="content html-only '+(null!=(i=l.if.call(r,null!=t?t.noScroll:t,{name:"if",hash:{},fn:n.program(18,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(r,null!=t?t.showFooter:t,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(l.ifDefined||t&&t.ifDefined||s).call(r,null!=t?t.contentPadding:t,{name:"ifDefined",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression((l.renderTrustedMarkup||t&&t.renderTrustedMarkup||s).call(r,null!=t?t.htmlMessage:t,{name:"renderTrustedMarkup",hash:{},data:e}))+"\n\t\t\t</div>\n"},27:function(n,t,l,a,e){var i,r=null!=t?t:{};return'\t\t\t<div\n\t\t\t\tclass="content subview '+(null!=(i=l.if.call(r,null!=t?t.noScroll:t,{name:"if",hash:{},fn:n.program(18,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(r,null!=t?t.showFooter:t,{name:"if",hash:{},fn:n.program(20,e,0),inverse:n.noop,data:e}))?i:"")+'"\n\t\t\t\tstyle="'+(null!=(i=(l.ifDefined||t&&t.ifDefined||l.helperMissing).call(r,null!=t?t.contentPadding:t,{name:"ifDefined",hash:{},fn:n.program(22,e,0),inverse:n.noop,data:e}))?i:"")+'"></div>\n'},29:function(n,t,l,a,e){var i;return'\t\t<div class="foot">\n'+(null!=(i=l.if.call(null!=t?t:{},null!=(i=null!=t?t.buttons:t)?i.visible:i,{name:"if",hash:{},fn:n.program(30,e,0),inverse:n.noop,data:e}))?i:"")+"\t\t</div>\n"},30:function(n,t,l,a,e){var i,r=null!=t?t:{};return'\t\t\t<div class="buttons">\n\t\t\t\t<div class="flavor-text-container">\n'+(null!=(i=l.if.call(r,null!=(i=null!=t?t.buttons:t)?i.flavorText:i,{name:"if",hash:{},fn:n.program(31,e,0),inverse:n.noop,data:e}))?i:"")+'\t\t\t\t</div>\n\t\t\t\t<div class="button-container">\n\t\t\t\t\t'+(null!=(i=l.if.call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.cancel:i)?i.visible:i,{name:"if",hash:{},fn:n.program(34,e,0),inverse:n.noop,data:e}))?i:"")+"\n\t\t\t\t\t"+(null!=(i=l.if.call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.action:i)?i.visible:i,{name:"if",hash:{},fn:n.program(36,e,0),inverse:n.noop,data:e}))?i:"")+"\n\t\t\t\t</div>\n\t\t\t</div>\n"},31:function(n,t,l,a,e){var i,r=null!=t?t:{};return'\t\t\t\t\t<div class="flavor-text secondary'+(null!=(i=l.unless.call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.flavorText:i)?i.visible:i,{name:"unless",hash:{},fn:n.program(32,e,0),inverse:n.noop,data:e}))?i:"")+'">'+n.escapeExpression((l.renderTrustedMarkup||t&&t.renderTrustedMarkup||l.helperMissing).call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.flavorText:i)?i.text:i,{name:"renderTrustedMarkup",hash:{},data:e}))+"</div>\n"},32:function(n,t,l,a,e){return" hidden"},34:function(n,t,l,a,e){var i;return'<button class="mini alt cancel">'+n.escapeExpression(n.lambda(null!=(i=null!=(i=null!=t?t.buttons:t)?i.cancel:i)?i.label:i,t))+"</button>"},36:function(n,t,l,a,e){var i,r=null!=t?t:{};return'<button class="mini '+(null!=(i=l.if.call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.action:i)?i.isDangerous:i,{name:"if",hash:{},fn:n.program(37,e,0),inverse:n.noop,data:e}))?i:"")+' action"'+(null!=(i=l.if.call(r,null!=(i=null!=(i=null!=t?t.buttons:t)?i.action:i)?i.disabled:i,{name:"if",hash:{},fn:n.program(39,e,0),inverse:n.noop,data:e}))?i:"")+">"+n.escapeExpression(n.lambda(null!=(i=null!=(i=null!=t?t.buttons:t)?i.action:i)?i.label:i,t))+"</button>"},37:function(n,t,l,a,e){return"danger"},39:function(n,t,l,a,e){return' disabled="disabled"'},compiler:[7,">= 4.0.0"],main:function(n,t,l,a,e){var i,r,s=null!=t?t:{};return'<div class="modal'+(null!=(i=l.if.call(s,null!=t?t.htmlMessage:t,{name:"if",hash:{},fn:n.program(1,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(s,null!=t?t.subview:t,{name:"if",hash:{},fn:n.program(3,e,0),inverse:n.noop,data:e}))?i:"")+" "+n.escapeExpression("function"==typeof(r=null!=(r=l.classList||(null!=t?t.classList:t))?r:l.helperMissing)?r.call(s,{name:"classList",hash:{},data:e}):r)+'">\n\t'+(null!=(i=l.if.call(s,null!=t?t.showCancelX:t,{name:"if",hash:{},fn:n.program(5,e,0),inverse:n.noop,data:e}))?i:"")+"\n"+(null!=(i=l.if.call(s,null!=t?t.showHeader:t,{name:"if",hash:{},fn:n.program(7,e,0),inverse:n.noop,data:e}))?i:"")+'\t<div class="body'+(null!=(i=l.if.call(s,null!=t?t.showBodyLines:t,{name:"if",hash:{},fn:n.program(15,e,0),inverse:n.noop,data:e}))?i:"")+'">\n'+(null!=(i=l.if.call(s,null!=t?t.textMessage:t,{name:"if",hash:{},fn:n.program(17,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(s,null!=t?t.htmlMessage:t,{name:"if",hash:{},fn:n.program(25,e,0),inverse:n.noop,data:e}))?i:"")+(null!=(i=l.if.call(s,null!=t?t.subview:t,{name:"if",hash:{},fn:n.program(27,e,0),inverse:n.noop,data:e}))?i:"")+"\t</div>\n"+(null!=(i=l.if.call(s,null!=t?t.showFooter:t,{name:"if",hash:{},fn:n.program(29,e,0),inverse:n.noop,data:e}))?i:"")+"</div>\n"},useData:!0}),a={};n.Array.each([],function(t){var l=n.Template.get("hermes/"+t);l&&(a[t]=l)}),n.Template.register("hermes/fluid-modal",function(t,e){return e=e||{},e.partials=e.partials?n.merge(a,e.partials):a,l(t,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-overlay-manager-view",function(e){"use strict";var i=0,l=e.Base.create("overlayManager",e.Base,[],{add:function(l){var a=this.get("overlay"),s=l.getAttrs(),t=this;this.get("modals").push(l),a?s.dismissOnOverlayClick&&this.set("dismissOnOverlayClick",!0):(a=e.Node.create(this.get("overlayHTML")),e.one("body").append(a),this.set("overlay",a),i++,this.addOverlayClickHandler(a),this.addOverlayKeyHandler(a),s.dismissOnOverlayClick?this.set("dismissOnOverlayClick",!0):this.set("dismissOnOverlayClick",!1)),this.setOverlayStyle(s),s.dismissOnActionClick&&l.on("actionClick",function(){setTimeout(function(){t.close()},0)}),"fluid-modal-view"===l.name&&l.on("cancelClick",function(){setTimeout(function(){t.close()},0)})},setOverlayStyle:function(e){var i="",l="",a="",s=this.get("overlay");e.hideModalOverlay&&(i="transparent"),e.darkOverlay&&(i="darker-overlay"),e.lightOverlay&&(i="light-overlay"),e.invisibleOverlay&&(l="invisible"),e.overlayClassList&&(a=e.overlayClassList),s.setAttribute("class",this.get("overlayClass")+" "+a+" "+i+" "+l)},addOverlayClickHandler:function(e){e.getDOMNode().addEventListener("click",this.clickHandler.bind(this))},removeOverlayClickHandler:function(e){e.getDOMNode().removeEventListener("click",this.clickHandler.bind(this))},addOverlayKeyHandler:function(i){e.one("body").getDOMNode().addEventListener("keyup",this.keyHandler.bind(this))},removeOverlayKeyHandler:function(i){e.one("body").getDOMNode().removeEventListener("keyup",this.keyHandler.bind(this))},keyHandler:function(e){27===e.keyCode&&this.clickHandler()},clickHandler:function(){var e,i=this.get("modals").length-2,l="",a="",s="",t=this.get("overlay");this.get("dismissOnOverlayClick")&&(this.set("dismissOnOverlayClick",!1),this.close(),i>-1&&this.get("modals").length>0&&((e=this.get("modals")[i].getAttrs()).hideModalOverlay&&(l="transparent"),e.invisibleOverlay&&(a="invisible"),e.overlayClassList&&(s=e.overlayClassList),t.setAttribute("class",this.get("overlayClass")+" "+s+" "+l+" "+a),this.set("dismissOnOverlayClick",e.dismissOnOverlayClick)))},remove:function(e){var i=this.get("modals");if(e.isClosed){var l=i.indexOf(e);l>-1&&i.splice(l,1),this.removeOverlay()}},close:function(){var e=this.get("modals").pop();e&&!e.isClosed&&e.close(),this.removeOverlay()},closeAll:function(){var e=this;this.get("modals").forEach(function(i,l){e.close()})},removeOverlay:function(){var e=this.get("overlay");if(0===this.get("modals").length&&e)this.removeOverlayClickHandler(e),this.removeOverlayKeyHandler(e),e.remove(),this.set("overlay",void 0),i--;else{var l=this.get("modals").length-1;l>-1&&this.setOverlayStyle(this.get("modals")[l].getAttrs())}},alreadyShowingModal:function(e){var i=!1;return e||(e="fluid-modal-view"),this.get("modals").forEach(function(l,a){l.name===e&&(i=!0)}),i}},{ATTRS:{modals:{value:[],validator:function(i){return e.Lang.isArray(i)}},overlayHTML:{},overlayClass:{},overlay:{value:void 0},dismissOnOverlayClick:{value:!0,setter:function(i){return e.AttributeHelpers.coerceBoolean(i)},validator:function(i){return e.Lang.isBoolean(i)}}}});e.OverlayManager={DroparoundOverlay:new l({overlayHTML:'<div class="fluid-droparound-overlay"></div>',overlayClass:"fluid-droparound-overlay"}),ModalOverlay:new l({overlayHTML:'<div class="fluid-modal-overlay"><div class="balls"></div></div>',overlayClass:"fluid-modal-overlay"}),SignupInterstitialOverlay:new l({overlayHTML:'<div class="signup-interstitial-overlay interstitial-fade"></div>',overlayClass:"signup-interstitial-overlay interstitial-fade"}),ChalkboardOverlay:new l({overlayHTML:'<div class="fluid-chalkboard-overlay"></div>',overlayClass:"fluid-chalkboard-overlay"}),hasOverlay:function(){return i>0}}},"@VERSION@",{requires:["base","flickr-view","attribute-helpers"],optionalRequires:["fluid"]});YUI.add("fluid",function(e){"use strict";function o(){var o="";if(!n.prefix&&"getComputedStyle"in e.config.win){if(!e.config.win.getComputedStyle(e.config.doc.documentElement,""))return n.prefix;o=(o=Array.prototype.slice.call(e.config.win.getComputedStyle(e.config.doc.documentElement,"")).join("").match(/-(webkit|moz|ms)-/))&&o.length>1?o[1]:"",n.prefix.raw=o.toLowerCase(),n.prefix.css="-"+o+"-",n.prefix.js=o.charAt(0).toUpperCase()+o.slice(1),n.prefix.dom="WebKit|Moz|MS".match(new RegExp("("+o+")","i"))[1]}return n.prefix}function t(o,t){return t=t||{timeout:1e4,retry:!1},t.timeout=parseInt(t.timeout,10),isNaN(t.timeout)&&(t.timeout=1e4),new e.Promise(function(e,r){n.loadImage.imageQueue.push({src:o,options:t,done:e,error:r}),i()})}function i(){var e=null;n.loadImage.currentWorkers<n.loadImage.maxWorkers-1&&n.loadImage.imageQueue.length&&(n.loadImage.currentWorkers++,(e={image:new Image,work:n.loadImage.imageQueue.shift(),timeout:null,loaded:null,finished:null}).finished=(function(e){return function(o){clearTimeout(e.timeout),e.image.removeEventListener("load",e.finished),e.image.removeEventListener("error",e.finished),e.image.removeEventListener("abort",e.finished),"load"===o.type?e.work.done(e.work.src):e.work.options.retry?t(e.work.src,{retry:!1,timeout:e.work.options.timeout}).then((function(e){return function(o){e(o)}})(e.work.done),(function(e){return function(o){e(o)}})(e.work.done)):e.work.error(e.work.src),e.image=null,e=null,n.loadImage.currentWorkers--,i()}})(e),e.image.addEventListener("load",e.finished),e.image.addEventListener("error",e.finished),e.image.addEventListener("abort",e.finished),e.image.src=e.work.src,e.timeout=setTimeout((function(e){return function(){e.finished({type:"error"})}})(e),e.work.options.timeout),e.image.complete&&e.finished({type:"load"}))}var n={prefix:{raw:"",css:"",js:"",dom:""},loadImage:{maxWorkers:8,currentWorkers:0,imageQueue:[],workingWorkers:[]}};o(),e.namespace("fluid"),e.mix(e.fluid,{determineBrowserPrefix:o,setStylePrefixed:function(e,o,t){return""!==n.prefix.css?t.getDOMNode().style.setProperty(n.prefix.css+e,o,null):t.setStyle(e,o),t},supports:function(o){var t=!1;return o+="",(t=o in e.config.doc.body.style)||(o=o.charAt(0).toUpperCase()+o.slice(1),t=n.prefix.raw+o in e.config.doc.body.style),t},prefix:n.prefix,chill:function(o,t){return t=t||e.config.win,new e.Promise(function(i,n){setTimeout(e.bind(function(){i(o.call(t))},t),1)})},loadImage:t,escapeHtml:function(o){var t;return o&&((t=e.config.doc.createElement("div")).appendChild(e.config.doc.createTextNode(o)),o=t.innerHTML),o},getTextFieldCursorPosition:function(o){var t,i;return e.config.doc.selection?((i=e.config.doc.selection.createRange()).moveStart=-o.get("value").length,t=i.text.length):"number"==typeof o.get("selectionStart")&&(t=o.get("selectionStart")),t},getTextFieldSelection:function(){var o="";return void 0!==e.config.win.getSelection?o=e.config.win.getSelection().toString():void 0!==e.config.doc.selection&&"Text"===e.config.doc.selection.type&&(o=e.config.doc.selection.createRange().text),o},removeDiacritics:function(e){var o,t,i={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","ẞ":"SS","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ɶ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ſ":"s","ẛ":"s","ß":"ss","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","０":"0","₀":"0","⓪":"0","⁰":"0","¹":"1","⑴":"1","₁":"1","❶":"1","⓵":"1","⒈":"1","①":"1","１":"1","²":"2","❷":"2","⑵":"2","２":"2","₂":"2","⓶":"2","②":"2","⒉":"2","³":"3","３":"3","⒊":"3","⑶":"3","₃":"3","❸":"3","⓷":"3","③":"3","⓸":"4","④":"4","⒋":"4","４":"4","⁴":"4","₄":"4","❹":"4","⑷":"4","⒌":"5","₅":"5","⓹":"5","⑸":"5","❺":"5","⑤":"5","５":"5","⁵":"5","⑹":"6","⁶":"6","６":"6","❻":"6","₆":"6","⑥":"6","⓺":"6","⒍":"6","７":"7","⁷":"7","❼":"7","⓻":"7","⒎":"7","₇":"7","⑺":"7","⑦":"7","⑧":"8","⒏":"8","⓼":"8","⑻":"8","⁸":"8","８":"8","❽":"8","₈":"8","⓽":"9","９":"9","⒐":"9","❾":"9","⑼":"9","₉":"9","⑨":"9","⁹":"9"},n=e.split(""),r=!1;for(o=n.length-1;o>=0;o--)t=n[o],i.hasOwnProperty(t)&&(n[o]=i[t],r=!0);return r&&(e=n.join("")),e}})},"@VERSION@",{requires:["flickr-promise"],optional:[],affinity:"client"});YUI.add("fluid-modal-view",function(e,t){"use strict";var i,n,a=require("hermes-core/flog")(t);i={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},n={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.set("isActiveViewAgnostic",!0);var i=this.get("modalOverlayType");return this.alreadyShowingModal=i.alreadyShowingModal(),this.alreadyShowingModal||(i.add(this),e.OverlayManager.ModalOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList")})),this},activate:function(){var t=this.get("container"),n=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(i.css.closeX).on(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode||this.handleX(e)},this)),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(i.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(i.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){n.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){n.reposition()})),this.get("navBarView")&&n.get("navBarView").activate(),this.get("subview")&&(n.get("subview").normalizedActivate(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))),this.registerEventHandler(t.delegate("keydown",this.keyboardSelectRadio.bind(this),"label")),this.get("focusOnFirstTabPress")&&this.registerEventHandler(t.ancestor("body").once("key",this.focusOnFirstTab.bind(this),"down:9")),e.Accessibility.manageFocusOutlines(this),this.registerEventHandler(e.on("modal:updateText",function(e){n.set("title",e.title),n.set("cancelButtonLabel",e.cancelText),n.set("actionButtonLabel",e.actionText),t.one(".title").set("textContent",e.title),t.one(".cancel").set("textContent",e.cancelText),t.one(".action").set("textContent",e.actionText)})),this.fire("activated"),this},focusOnFirstTab:function(e){var t=this.get("container").one("[tabindex]");t&&t.focus()},keyboardSelectRadio:function(e){if(13===e.keyCode){var t=this.get("container").one("#"+e.target.getAttribute("for"));t.set("checked",!t.get("checked"))}},clearOutline:function(){var t=e.one(document.activeElement);t&&t.addClass("no-outline")},restoreOutline:function(){var e=this.get("container").one(":focus");e&&e.removeClass("no-outline")},show:function(){return this.initialize().then(null,function(e){a.error("Error initializing modal",{err:e})}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t,o=this,s=e.one(i.css.destinationContainer);t={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),lightOverlay:this.get("lightOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList"),contentPadding:this.get("contentPadding")},this.get("buttonFlavorText")&&(t.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerWithTemplate("fluid-modal",t),n.modal.width=this.get("width"),n.modal.minWidth=this.get("minWidth"),n.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=o.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(o.get("subview")&&"navigation"===e.details[0]?o.get("subview").fire.apply(o.get("subview"),["parentViewEvent"].concat(e.details)):o.get("subview")&&"search"===e.details[0]&&o.get("subview").fire.apply(o.get("subview"),["parentViewEvent"].concat(e.details)),o.fire.apply(o,e.details))}),o.get("container").one(i.css.navBarContent).appendChild(e.get("container")),o.get("subview")||o.activate()})),this.get("subview")?(this.get("subview").appContext=o.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){o.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(o.get("navBarView")&&"backToList"===e.details[0]&&o.get("navBarView").fire.apply(o.get("navBarView"),["parentViewEvent"].concat(e.details)),o.fire.apply(o,e.details))}),o.get("container").one(i.css.subviewContent).appendChild(e.get("container")),s&&(s.append(o.get("container")),o.reposition()),o.activate()},function(e){a.error("Error initializing modal subview",{err:e})})):s&&(s.append(this.get("container")),this.reposition())}return this},reposition:function(){var t,a,o,s=this.get("container").one(this.get("modalSelector")),l=e.one(e.config.win),r=parseInt(l.get("innerWidth"),10),h=parseInt(l.get("innerHeight"),10),c=n.modal.width?parseInt(n.modal.width,10):parseInt(s.getComputedStyle("width"),10),d={},u=s.one(".body"),g=0,v=this.get("showFooter")?parseInt(s.one(".foot").getComputedStyle("height"),10):0,w=0,b=parseInt(u.getComputedStyle("borderTopWidth"),10)+parseInt(u.getComputedStyle("borderBottomWidth"),10),m={};n.modal.height&&(g=s.one(".head")?parseInt(s.one(".head").getComputedStyle("height"),10):0,w=n.modal.height,s.get("showFooter")&&(v=parseInt(s.one(".foot").getComputedStyle("height"),10)),n.modal.height+g+v+80+b>=h&&(w=h<=700?h-g-v-b:h-g-v-80-b),s.setStyles({maxHeight:"none"}),this.get("fullWindow")?m.height=w+"px":this.get("maxHeight")&&(m.maxHeight=w+"px"),s.one(i.css.modalContent).setStyles(m)),t=parseInt(s.getComputedStyle("height"),10),a=s.getDOMNode().scrollHeight,o=s.getDOMNode().scrollWidth,d={top:"50%",left:"50%",width:n.modal.width?c+"px":"",marginTop:-t/2+"px",marginLeft:-c/2+"px",minWidth:n.modal.minWidth?n.modal.minWidth+"px":""},t+40>h||a>t+1||c+40>r||o>c?(h<=700&&n.modal.height?d.maxHeight=h-10+"px":(d.maxHeight=h-40+"px",d.overflow="auto"),d.maxWidth=r-40+"px",d.marginTop=-Math.min(parseInt(d.maxHeight,10),t)/2+"px",d.marginLeft=-Math.min(parseInt(d.maxWidth,10),c)/2+"px"):(d.maxHeight="inherit",d.maxWidth="inherit",d.overflow="visible"),s.setStyles(d)},handleX:function(i){var n=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),n&&n.handleX&&n.handleX(),this.close(i),this.fire("cancelClick",i)},handleCancel:function(i){var n=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),n&&n.handleCancel&&!1===n.handleCancel()||(this.fire("cancelClick",i),this.close(i))},handleAction:function(e){var t=this.get("subview");t&&t.handleAction&&!1===t.handleAction()||(this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e))},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var i=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),i&&i.remove(!0),this.fire("close",t),this.destroy(),this.get("removeOverlayOnClose")||this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},lightOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay},removeOverlayOnClose:{value:!1},overlayClassList:{value:"",validator:function(t,i){return e.AttributeHelpers.validateString(t)},setter:function(t,i){return e.AttributeHelpers.coerceString(t)}},contentPadding:{value:void 0,validator:function(t,i){return e.AttributeHelpers.validateInteger(t)},setter:function(t,i){return e.AttributeHelpers.coerceInteger(t)}},focusOnFirstTabPress:{value:!0}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-modal","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"],langBundles:["common"]});YUI.add("hermes-template-signup-modal",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,s,l){var i;return" "+a.escapeExpression("function"==typeof(i=null!=(i=n.signUpHeaderClass||(null!=e?e.signUpHeaderClass:e))?i:n.helperMissing)?i.call(null!=e?e:{},{name:"signUpHeaderClass",hash:{},data:l}):i)},3:function(a,e,n,s,l){var i;return" style=\"background-image:url('"+a.escapeExpression("function"==typeof(i=null!=(i=n.signUpHeaderImage||(null!=e?e.signUpHeaderImage:e))?i:n.helperMissing)?i.call(null!=e?e:{},{name:"signUpHeaderImage",hash:{},data:l}):i)+"')\""},compiler:[7,">= 4.0.0"],main:function(a,e,n,s,l){var i,t,r=null!=e?e:{},p=n.helperMissing,g=a.escapeExpression;return'<div class="signup-modal-body">\n\t<div class="head'+(null!=(i=n.if.call(r,null!=e?e.signUpHeaderClass:e,{name:"if",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l}))?i:"")+'"'+(null!=(i=n.if.call(r,null!=e?e.signUpHeaderImage:e,{name:"if",hash:{},fn:a.program(3,l,0),inverse:a.noop,data:l}))?i:"")+'></div>\n\t<h3 class="signup-title">'+g("function"==typeof(t=null!=(t=n.signUpTitle||(null!=e?e.signUpTitle:e))?t:p)?t.call(r,{name:"signUpTitle",hash:{},data:l}):t)+'</h3>\n\t<p class="signup-message">'+g("function"==typeof(t=null!=(t=n.signUpMessage||(null!=e?e.signUpMessage:e))?t:p)?t.call(r,{name:"signUpMessage",hash:{},data:l}):t)+'</p>\n\t<button class="large action signup-button">'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:l}))+'</button>\n</div>\n<div class="signup-modal-footer">\n\t<span>'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.HAVE_YAHOO_ACCOUNT"},data:l}))+'</span>\n\t<a href="#" class="signin-link">'+g((n.intlMessage||e&&e.intlMessage||p).call(r,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:l}))+"</a>\n</div>\n"},useData:!0}),s={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(s[e]=n)}),a.Template.register("hermes/signup-modal",function(e,l){return l=l||{},l.partials=l.partials?a.merge(s,l.partials):s,n(e,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("signup-modal-view",function(i,s){"use strict";i.namespace("Views").SignUpModal=i.FlickrView.create(this.name,i.Views.FluidModal,[],{initializer:function(i){return this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",i.signUpHeaderClass),this.set("signUpHeaderImage",i.signUpHeaderImage),this.set("signUpTitle",i.signUpTitle),this.set("signUpMessage",i.signUpMessage),this.set("beaconPrefix",i.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){i.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalShow");var s={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(s)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(s){i.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",s),this.constructor.superclass.handleAction.call(this)},handleAction:function(s){i.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",s),this.constructor.superclass.handleAction.call(this)},handleCancel:function(s){i.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal"],optionalRequires:["fluid"],langBundles:["common"]});YUI.add("hermes-template-fluid-share",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,l,s){return" disable-sharing"},3:function(a,e,n,l,s){return' title="'+a.escapeExpression((n.intlMessage||e&&e.intlMessage||n.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"share-modal.SHARING_DISABLED"},data:s}))+'" '},5:function(a,e,n,l,s){var t;return' title="'+a.escapeExpression("function"==typeof(t=null!=(t=n.shareTooltip||(null!=e?e.shareTooltip:e))?t:n.helperMissing)?t.call(null!=e?e:{},{name:"shareTooltip",hash:{},data:s}):t)+'"'},7:function(a,e,n,l,s){var t,r=null!=e?e:{};return"\t\t<span "+(null!=(t=n.if.call(r,null!=e?e.sharingDisabled:e,{name:"if",hash:{},fn:a.program(3,s,0),inverse:a.program(5,s,0),data:s}))?t:"")+' class="fluid-share-button-label">'+a.escapeExpression((n.intlMessage||e&&e.intlMessage||n.helperMissing).call(r,{name:"intlMessage",hash:{intlName:"share-modal.SHARE"},data:s}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,e,n,l,s){var t,r,i=null!=e?e:{},o=n.helperMissing,u=a.escapeExpression;return'<div class="fluid-share-button '+u("function"==typeof(r=null!=(r=n.extraShareButtonClassList||(null!=e?e.extraShareButtonClassList:e))?r:o)?r.call(i,{name:"extraShareButtonClassList",hash:{},data:s}):r)+(null!=(t=n.if.call(i,null!=e?e.sharingDisabled:e,{name:"if",hash:{},fn:a.program(1,s,0),inverse:a.noop,data:s}))?t:"")+'"\n'+(null!=(t=n.if.call(i,null!=e?e.sharingDisabled:e,{name:"if",hash:{},fn:a.program(3,s,0),inverse:a.program(5,s,0),data:s}))?t:"")+' tabindex="0">\n\n\t<span '+(null!=(t=n.if.call(i,null!=e?e.sharingDisabled:e,{name:"if",hash:{},fn:a.program(3,s,0),inverse:a.program(5,s,0),data:s}))?t:"")+' class="fluid-share-icon '+u("function"==typeof(r=null!=(r=n.extraShareButtonIconClassList||(null!=e?e.extraShareButtonIconClassList:e))?r:o)?r.call(i,{name:"extraShareButtonIconClassList",hash:{},data:s}):r)+'"></span>\n'+(null!=(t=n.if.call(i,null!=e?e.showShareButtonLabel:e,{name:"if",hash:{},fn:a.program(7,s,0),inverse:a.noop,data:s}))?t:"")+"\n </div>\n"},useData:!0}),l={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(l[e]=n)}),a.Template.register("hermes/fluid-share",function(e,s){return s=s||{},s.partials=s.partials?a.merge(l,s.partials):l,n(e,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-share-tumblr-post",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,l,r){var t,s=null!=n?n:{},i=a.helperMissing,u=e.escapeExpression;return"\t<strong>"+u("function"==typeof(t=null!=(t=a.title||(null!=n?n.title:n))?t:i)?t.call(s,{name:"title",hash:{},data:r}):t)+' <a href="'+u("function"==typeof(t=null!=(t=a.ownerURL||(null!=n?n.ownerURL:n))?t:i)?t.call(s,{name:"ownerURL",hash:{},data:r}):t)+'">'+u((a.intlMessage||n&&n.intlMessage||i).call(s,{name:"intlMessage",hash:{user:null!=n?n.ownerName:n,intlName:"common.BY_USER"},data:r}))+"</a></strong>\n"},3:function(e,n,a,l,r){var t;return null!=(t=a.if.call(null!=n?n:{},null!=n?n.ownerURL:n,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.program(6,r,0),data:r}))?t:""},4:function(e,n,a,l,r){var t,s=null!=n?n:{},i=a.helperMissing,u=e.escapeExpression;return'\t\t<strong><a href="'+u("function"==typeof(t=null!=(t=a.ownerURL||(null!=n?n.ownerURL:n))?t:i)?t.call(s,{name:"ownerURL",hash:{},data:r}):t)+'">'+u("function"==typeof(t=null!=(t=a.title||(null!=n?n.title:n))?t:i)?t.call(s,{name:"title",hash:{},data:r}):t)+"</a></strong>\n"},6:function(e,n,a,l,r){var t,s=null!=n?n:{},i=a.helperMissing,u=e.escapeExpression;return'\t\t<strong><a href="'+u("function"==typeof(t=null!=(t=a.linkToShare||(null!=n?n.linkToShare:n))?t:i)?t.call(s,{name:"linkToShare",hash:{},data:r}):t)+'">'+u("function"==typeof(t=null!=(t=a.title||(null!=n?n.title:n))?t:i)?t.call(s,{name:"title",hash:{},data:r}):t)+"</a></strong>\n"},8:function(e,n,a,l,r){var t=null!=n?n:{},s=a.helperMissing,i=e.escapeExpression;return"\t<br /><i>"+i((a.intlMessage||n&&n.intlMessage||s).call(t,{name:"intlMessage",hash:{intlName:"share-modal.VIA_FLICKR"},data:r}))+"</i>\n\t<br />"+i((a.renderTrustedMarkup||n&&n.renderTrustedMarkup||s).call(t,null!=n?n.description:n,{name:"renderTrustedMarkup",hash:{},data:r}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,l,r){var t,s=null!=n?n:{};return(null!=(t=a.if.call(s,null!=n?n.ownerName:n,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?t:"")+"\n"+(null!=(t=a.if.call(s,null!=n?n.description:n,{name:"if",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r}))?t:"")},useData:!0}),l={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)}),e.Template.register("hermes/fluid-share-tumblr-post",function(n,r){return r=r||{},r.partials=r.partials?e.merge(l,r.partials):l,a(n,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});